{% extends "base.html" %}

{% block title %}{{ SITENAME }}{% if SITESUBTITLE %} | {{ SITESUBTITLE }}{% endif %}{% endblock %}

{% block content %}
{% if articles %}
    {% for article in articles_page.object_list %}
    <article class="post-item">
        <header class="article-header">
            {% if article.category %}
            <a href="{{ SITEURL }}/{{ article.category.url }}" class="article-category-label">{{ article.category }}</a>
            {% endif %}
            <h2 class="post-title">
                <a href="{{ SITEURL }}/{{ article.url }}">{{ article.title }}</a>
            </h2>
            <div class="article-meta">
                <time datetime="{{ article.date.isoformat() }}">{{ article.locale_date }}</time>
                {% if article.readtime %}
                <span>&bull;</span>
                <span>{{ article.readtime.minutes }} min read</span>
                {% endif %}
            </div>
        </header>

        {% if article.image %}
        <a href="{{ SITEURL }}/{{ article.url }}" class="post-image-link">
            <img src="{{ SITEURL }}/images/{{ article.image }}" alt="{{ article.title }}" class="post-image" loading="lazy">
        </a>
        {% endif %}

        <div class="article-content">
            {{ article.summary }}
            <a href="{{ SITEURL }}/{{ article.url }}" class="read-more">Read more &rarr;</a>
        </div>

        {% if article.tags %}
        <div class="tags">
            {% for tag in article.tags[:3] %}
            <a href="{{ SITEURL }}/{{ tag.url }}" class="tag">{{ tag }}</a>
            {% endfor %}
            {% if article.tags|length > 3 %}
            <span class="tag">+{{ article.tags|length - 3 }} more</span>
            {% endif %}
        </div>
        {% endif %}
    </article>
    {% endfor %}
{% else %}
    <article>
        <h1>No articles found</h1>
        <p>It looks like there are no articles published yet.</p>
    </article>
{% endif %}

{% include 'pagination.html' %}
{% endblock %}
